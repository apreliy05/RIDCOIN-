const player = document.getElementById('player');
const gameArea = document.getElementById('gameArea');
const gameAreaWidth = gameArea.offsetWidth;
const gameAreaHeight = gameArea.offsetHeight;
let playerPositionX = 275; // Начальная позиция игрока
let playerSpeed = 10; // Скорость движения игрока

// Движение игрока
document.addEventListener('keydown', (event) => {
    if (event.key === 'ArrowLeft' && playerPositionX > 0) {
        playerPositionX -= playerSpeed;
    } else if (event.key === 'ArrowRight' && playerPositionX < gameAreaWidth - 50) {
        playerPositionX += playerSpeed;
    }
    player.style.left = playerPositionX + 'px';
});

// Падающие объекты
let fallingObjects = [];
let objectSpeed = 2;
let score = 0;

// Функция создания объектов
function createFallingObject() {
    const object = document.createElement('div');
    object.classList.add('fallingObject');
    object.style.left = Math.random() * (gameAreaWidth - 50) + 'px';
    object.style.top = '-50px';
    gameArea.appendChild(object);
    fallingObjects.push(object);
}

// Двигаем падающие объекты
function moveFallingObjects() {
    for (let i = 0; i < fallingObjects.length; i++) {
        const object = fallingObjects[i];
        let objectTop = parseInt(object.style.top);
        object.style.top = objectTop + objectSpeed + 'px';

        // Проверка на столкновение
        if (objectTop > gameAreaHeight - 50 && objectTop < gameAreaHeight && 
            parseInt(object.style.left) > playerPositionX - 50 && 
            parseInt(object.style.left) < playerPositionX + 50) {
            alert('Game Over! Your score: ' + score);
            location.reload(); // Перезагружаем игру
        }

        if (objectTop > gameAreaHeight) {
            gameArea.removeChild(object);
            fallingObjects.splice(i, 1);
            score++;
        }
    }
}

// Генерация объектов каждую секунду
setInterval(createFallingObject, 1000);

// Обновление состояния игры каждую секунду
setInterval(moveFallingObjects, 20);