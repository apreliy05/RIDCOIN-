<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>RIDCOIN Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom, #0d0d0d, #1a1a1a);
      color: white;
      margin: 0;
      text-align: center;
      overflow: hidden;
    }
    #gameArea {
      position: relative;
      width: 100%;
      height: 80vh;
      overflow: hidden;
      border: 2px solid #444;
      margin-top: 10px;
    }
    .coin, .bonus, .trap {
      position: absolute;
      width: 50px;
      height: 50px;
      cursor: pointer;
      user-select: none;
      animation: fall linear;
    }
    .coin { background: url('https://i.imgur.com/lkVGrTg.png') no-repeat center/cover; }
    .bonus { background: url('https://i.imgur.com/ZF3WzWg.png') no-repeat center/cover; }
    .trap { background: url('https://i.imgur.com/rhtkE52.png') no-repeat center/cover; }

    @keyframes fall {
      from { top: -60px; }
      to { top: 100%; }
    }

    #score, #record, #timer, #message {
      margin-top: 10px;
      font-size: 24px;
    }
    #menu {
      margin-top: 20px;
    }
    button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
      border-radius: 10px;
      border: none;
      background-color: #28a745;
      color: white;
    }
    button:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>

<h1>RIDCOIN GAME</h1>

<div id="score">Очки: 0</div>
<div id="record">Рекорд: 0</div>
<div id="timer">Время: 60</div>
<div id="message"></div>

<div id="menu">
  <button onclick="startGame()">Начать игру</button>
  <button onclick="changeSkin()">Сменить скин</button>
</div>

<div id="gameArea"></div>

<script>
  const gameArea = document.getElementById('gameArea');
  const scoreDisplay = document.getElementById('score');
  const recordDisplay = document.getElementById('record');
  const timerDisplay = document.getElementById('timer');
  const message = document.getElementById('message');
  let score = 0;
  let speed = 5;
  let timer = 60;
  let intervalId;
  let spawnId;
  let isGameRunning = false;
  let skins = [
    'https://i.imgur.com/lkVGrTg.png', // обычный
    'https://i.imgur.com/u4N1aL4.png', // другой
    'https://i.imgur.com/B92Iq3V.png'  // ещё один
  ];
  let currentSkin = 0;

  // загружаем рекорд
  let bestScore = localStorage.getItem('bestScore') || 0;
  recordDisplay.textContent = "Рекорд: " + bestScore;

  function startGame() {
    score = 0;
    speed = 5;
    timer = 60;
    updateScore();
    updateTimer();
    message.textContent = "";
    gameArea.innerHTML = "";
    isGameRunning = true;

    clearInterval(intervalId);
    clearInterval(spawnId);

    spawnId = setInterval(createCoin, 1000);
    intervalId = setInterval(() => {
      timer--;
      updateTimer();
      if (timer <= 0) {
        endGame();
      }
    }, 1000);
  }

  function endGame() {
    isGameRunning = false;
    clearInterval(intervalId);
    clearInterval(spawnId);
    message.textContent = `Игра окончена! Ты набрал ${score} очков!`;

    if (score > bestScore) {
      bestScore = score;
      localStorage.setItem('bestScore', bestScore);
      recordDisplay.textContent = "Рекорд: " + bestScore;
    }

    if (score >= 100) {
      alert("Поздравляем! Ты заработал 10 RIDCOIN!");
    }
  }

  function createCoin() {
    if (!isGameRunning) return;

    const coin = document.createElement('div');
    const type = Math.random();

    if (type < 0.8) {
      coin.className = 'coin';
      coin.style.backgroundImage = `url(${skins[currentSkin]})`;
    } else if (type < 0.95) {
      coin.className = 'bonus';
    } else {
      coin.className = 'trap';
    }

    coin.style.left = Math.random() * (gameArea.clientWidth - 50) + 'px';
    coin.style.animationDuration = speed + 's';
    gameArea.appendChild(coin);

    coin.addEventListener('click', () => {
      if (coin.classList.contains('coin')) {
        score++;
        animateClick(coin);
      } else if (coin.classList.contains('bonus')) {
        score += 10;
        animateClick(coin);
        showMessage("Бонус +10 монет!");
      } else if (coin.classList.contains('trap')) {
        score = Math.max(0, score - 5);
        animateClick(coin);
        showMessage("Ловушка -5 монет!");
      }
      updateScore();
      coin.remove();
    });

    setTimeout(() => {
      coin.remove();
    }, speed * 1000);
  }

  function animateClick(coin) {
    coin.style.transition = "transform 0.3s ease, opacity 0.3s ease";
    coin.style.transform = "scale(1.5)";
    coin.style.opacity = "0";
    setTimeout(() => {
      coin.remove();
    }, 300);
  }

  function updateScore() {
    scoreDisplay.textContent = "Очки: " + score;
    if (score % 20 === 0 && score > 0 && speed > 1) {
      speed -= 0.5;
    }
  }

  function updateTimer() {
    timerDisplay.textContent = "Время: " + timer;
  }

  function showMessage(text) {
    message.textContent = text;
    setTimeout(() => { message.textContent = ""; }, 2000);
  }

  function changeSkin() {
    currentSkin = (currentSkin + 1) % skins.length;
    alert("Скин монеты сменён!");
  }
</script>

</body>
</html>